<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>COVID-19 Narrative Visualization</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    .scene { display: none; padding: 40px; overflow: visible; position: relative;}
    .active { display: block; }
    svg { width: 100%; height: 500px; overflow: visible; position: relative;}
    button { margin-top: 20px; padding: 10px 20px; }
    #dropdown { margin-top: 20px; }
    .annotation { font-size: 14px; fill: darkslategray; font-style: italic; }
    #tooltip { z-index: 1000; }
  </style>
</head>
<body>
  <div id="scene1" class="scene active">
    <h2>Scene 1: Where It Started</h2>
    <svg id="mapScene"></svg>
    <button onclick="nextScene(2)">See What Happened Next</button>
  </div>

  <div id="scene2" class="scene">
    <h2>Scene 2: Surges and Spikes</h2>
    <svg id="usTrend"></svg>
    <button onclick="nextScene(1)">Back</button>
    <button onclick="nextScene(3)">What About Individual States?</button>
  </div>

  <div id="scene3" class="scene">
    <h2>Scene 3: State-by-State Peaks</h2>
    <svg id="barChart"></svg>
    <button onclick="nextScene(2)">Back</button>
    <button onclick="nextScene(4)">Explore Your State</button>
  </div>

  <div id="scene4" class="scene">
    <h2>Scene 4: Explore Your State</h2>
    <label for="dropdown">Select a state:</label>
    <select id="dropdown"></select>
    <svg id="stateLineChart"></svg>
    <button onclick="nextScene(3)">Back</button>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson-client@3"></script>
  <script src="https://unpkg.com/d3-svg-annotation@2.5.1/d3-annotation.min.js"></script>
  <script>
    const scenes = [1, 2, 3, 4];
    function nextScene(n) {
      scenes.forEach(i => document.getElementById(`scene${i}`).classList.remove('active'));
      document.getElementById(`scene${n}`).classList.add('active');
    } 
  </script>
  <script src="scenes.js"></script>
</body>
</html>
